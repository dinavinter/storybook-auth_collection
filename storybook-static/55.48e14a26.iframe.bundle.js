(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1042:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return createStore})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useGigyaSdk}));__webpack_require__(73),__webpack_require__(83),__webpack_require__(508),__webpack_require__(13),__webpack_require__(20),__webpack_require__(21),__webpack_require__(51),__webpack_require__(254),__webpack_require__(19),__webpack_require__(130),__webpack_require__(47),__webpack_require__(77),__webpack_require__(30),__webpack_require__(340),__webpack_require__(69),__webpack_require__(12),__webpack_require__(10),__webpack_require__(9),__webpack_require__(14),__webpack_require__(24),__webpack_require__(339);var _index_4644c745_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(146);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var isConnected=function isConnected(maybeElement){return!("isConnected"in maybeElement)||maybeElement.isConnected},cleanupElements=function debounce(fn,ms){var timeoutId;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];timeoutId&&clearTimeout(timeoutId),timeoutId=setTimeout((function(){timeoutId=0,fn.apply(void 0,args)}),ms)}}((function(map){var _step,_iterator=_createForOfIteratorHelper(map.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;map.set(key,map.get(key).filter(isConnected))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}),2e3),removeFromArray=function removeFromArray(array,item){var index=array.indexOf(item);index>=0&&(array[index]=array[array.length-1],array.length--)},createStore=function createStore(defaultState,shouldUpdate){var map=function createObservableMap(defaultState){var shouldUpdate=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(a,b){return a!==b},states=new Map(Object.entries(null!=defaultState?defaultState:{})),handlers={dispose:[],get:[],set:[],reset:[]},reset=function reset(){states=new Map(Object.entries(null!=defaultState?defaultState:{})),handlers.reset.forEach((function(cb){return cb()}))},dispose=function dispose(){handlers.dispose.forEach((function(cb){return cb()})),reset()},_get=function get(propName){return handlers.get.forEach((function(cb){return cb(propName)})),states.get(propName)},_set=function set(propName,value){var oldValue=states.get(propName);shouldUpdate(value,oldValue,propName)&&(states.set(propName,value),handlers.set.forEach((function(cb){return cb(propName,value,oldValue)})))},state="undefined"==typeof Proxy?{}:new Proxy(defaultState,{get:function get(_,propName){return _get(propName)},ownKeys:function ownKeys(_){return Array.from(states.keys())},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has:function has(_,propName){return states.has(propName)},set:function set(_,propName,value){return _set(propName,value),!0}}),on=function on(eventName,callback){return handlers[eventName].push(callback),function(){removeFromArray(handlers[eventName],callback)}},onChange=function onChange(propName,cb){var unSet=on("set",(function(key,newValue){key===propName&&cb(newValue)})),unReset=on("reset",(function(){return cb(defaultState[propName])}));return function(){unSet(),unReset()}},use=function use(){for(var _len2=arguments.length,subscriptions=new Array(_len2),_key2=0;_key2<_len2;_key2++)subscriptions[_key2]=arguments[_key2];return subscriptions.forEach((function(subscription){subscription.set&&on("set",subscription.set),subscription.get&&on("get",subscription.get),subscription.reset&&on("reset",subscription.reset)}))};return{state:state,get:_get,set:_set,on:on,onChange:onChange,use:use,dispose:dispose,reset:reset,forceUpdate:function forceUpdate(key){var oldValue=states.get(key);handlers.set.forEach((function(cb){return cb(key,oldValue,oldValue)}))}}}(defaultState,shouldUpdate);return function stencilSubscription(_ref){var on=_ref.on,elmsToUpdate=new Map;"function"==typeof _index_4644c745_js__WEBPACK_IMPORTED_MODULE_21__.c&&(on("dispose",(function(){elmsToUpdate.clear()})),on("get",(function(propName){var elm=Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_21__.c)();elm&&function appendToMap(map,propName,value){var items=map.get(propName);items?items.includes(value)||items.push(value):map.set(propName,[value])}(elmsToUpdate,propName,elm)})),on("set",(function(propName){var elements=elmsToUpdate.get(propName);elements&&elmsToUpdate.set(propName,elements.filter(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_21__.h)),cleanupElements(elmsToUpdate)})),on("reset",(function(){elmsToUpdate.forEach((function(elms){return elms.forEach(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_21__.h)})),cleanupElements(elmsToUpdate)})))}(map),map},_createStore=createStore({accounts:{},socialize:{},gigya:void 0,apiKey:void 0,showScreenSet:function showScreenSet(args){this.gigya.accounts.showScreenSet(args)},showDebugUI:function showDebugUI(){this.gigya.showDebugUI()}}),state=_createStore.state,onChange=_createStore.onChange;function loadGigyaService(){var gigya=window.gigya;state.gigya=gigya,state.socialize=gigya.socialize,state.accounts=gigya.accounts,state.apiKey=gigya.apiKey,console.log("on gigya load")}function useGigyaSdk(apiKey){return new Promise((function(resolve){!function onGigyaService(cb){function sdk(gigya){return{gigya:gigya,socialize:gigya.socialize,accounts:gigya.accounts,apiKey:gigya.apiKey,showScreenSet:function showScreenSet(args){gigya.accounts.showScreenSet(args)},showDebugUI:function showDebugUI(){gigya.showDebugUI()}}}state.gigya&&cb(sdk(state.gigya)),onChange("gigya",(function(gigya){cb(sdk(gigya))}))}((function(gigya){console.log("useGigya::loaded "+apiKey),console.log(gigya),!gigya.gigya||apiKey&&gigya.apiKey!==apiKey||(console.log("useGigya::loaded "+apiKey),resolve(gigya))}))}))}onChange("gigya",(function(gigya){console.log("on gigya loaded"),console.log(gigya)})),window.gigya&&loadGigyaService(),window.onGigyaServiceReady=loadGigyaService},909:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"auth_machine",(function(){return AuthMachine})),__webpack_require__.d(__webpack_exports__,"gigya_screen",(function(){return GigyaScreen})),__webpack_require__.d(__webpack_exports__,"gigya_screen_router",(function(){return ScreenRouter})),__webpack_require__.d(__webpack_exports__,"gigya_store",(function(){return GigyaStore})),__webpack_require__.d(__webpack_exports__,"router_link",(function(){return RouterLink}));__webpack_require__(69),__webpack_require__(13),__webpack_require__(174),__webpack_require__(19),__webpack_require__(20),__webpack_require__(21),__webpack_require__(18),__webpack_require__(38),__webpack_require__(32),__webpack_require__(131),__webpack_require__(12),__webpack_require__(10),__webpack_require__(30),__webpack_require__(9),__webpack_require__(14),__webpack_require__(24),__webpack_require__(339);var _index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(146),_Machine_be92010c_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1058),_interpreter_c73c92fc_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(1035),_gigya_script_store_6321c953_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1042),_overlays_19926d77_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(1018);__webpack_require__(253),__webpack_require__(1015),__webpack_require__(1010);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var machine=Object(_Machine_be92010c_js__WEBPACK_IMPORTED_MODULE_18__.a)({id:"colors",initial:"green",states:{green:{on:{NEXT:"yellow"}},yellow:{on:{NEXT:"red"}},red:{on:{NEXT:"green"}}}}),AuthMachine=function(){function AuthMachine(hostRef){_classCallCheck(this,AuthMachine),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.m)(this,hostRef),this._service=Object(_interpreter_c73c92fc_js__WEBPACK_IMPORTED_MODULE_19__.V)(machine,{devTools:!0}),this.state=machine.initialState}return _createClass(AuthMachine,[{key:"componentWillLoad",value:function componentWillLoad(){var _this=this;this._service.subscribe((function(state){_this.state=state})),this._service.start()}},{key:"disconnectedCallback",value:function disconnectedCallback(){this._service.stop()}},{key:"render",value:function render(){var send=this._service.send;return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("button",{onClick:function onClick(){return send({type:"NEXT"})}},this.state.value)}}]),AuthMachine}(),state=Object(_gigya_script_store_6321c953_js__WEBPACK_IMPORTED_MODULE_20__.a)({}).state;function loadScript(apiKey,domain){var src="https://cdns."+domain+"/js/gigya.js?apikey="+apiKey;return new Promise((function(resolve){console.log("loading script "+src);var old=document.getElementById("gigya-sdk");null!=old&&document.head.removeChild(old);var script=document.createElement("script");script.src=src,script.id="gigya-sdk",document.head.appendChild(script),resolve(script)}))}function loadGigya(_x,_x2){return _loadGigya.apply(this,arguments)}function _loadGigya(){return(_loadGigya=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(apiKey,domain){return regeneratorRuntime.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(console.log("loadGigya "+apiKey),state[apiKey]){_context9.next=13;break}return _context9.t0=apiKey,_context9.t1=domain,_context9.t2=Object(_gigya_script_store_6321c953_js__WEBPACK_IMPORTED_MODULE_20__.b)(apiKey),_context9.next=7,loadScript(apiKey,domain);case 7:return _context9.t3=_context9.sent,state[apiKey]={apiKey:_context9.t0,domain:_context9.t1,gigya:_context9.t2,script:_context9.t3},state.current=state[apiKey],_context9.next=12,state[apiKey].gigya;case 12:return _context9.abrupt("return",_context9.sent);case 13:case"end":return _context9.stop()}}),_callee9)})))).apply(this,arguments)}function useGigya(){return _useGigya.apply(this,arguments)}function _useGigya(){return(_useGigya=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(){return regeneratorRuntime.wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,state.current.gigya;case 2:return _context10.abrupt("return",_context10.sent);case 3:case"end":return _context10.stop()}}),_callee10)})))).apply(this,arguments)}var GigyaScreen=function(){function GigyaScreen(hostRef){_classCallCheck(this,GigyaScreen),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.m)(this,hostRef),this.container="gigya-screen-container"}var _componentDidLoad;return _createClass(GigyaScreen,[{key:"componentDidLoad",value:(_componentDidLoad=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,useGigya();case 2:(0,_context.sent.showScreenSet)({screenSet:this.screen_set,startScreen:this.start_screen,containerID:this.container});case 5:case"end":return _context.stop()}}),_callee,this)}))),function componentDidLoad(){return _componentDidLoad.apply(this,arguments)})},{key:"render",value:function render(){return console.log("Screen Page "+this.screen_set),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("div",null,Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("div",{id:this.container}))}}]),GigyaScreen}();GigyaScreen.style=":host{display:block}";var Route=function Route(props,children){var _a;return"to"in props?{path:props.path,to:props.to}:{path:props.path,id:props.id,jsx:null!==(_a=props.render)&&void 0!==_a?_a:children}},matchPath=function matchPath(pathname,path){if("string"==typeof path){if(path===pathname)return{}}else if("function"==typeof path){var params=path(pathname);if(params)return!0===params?{}:Object.assign({},params)}else{var results=path.exec(pathname);if(results)return path.lastIndex=0,Object.assign({},results)}},DEFAULT_PARSE_URL=function DEFAULT_PARSE_URL(url){return url.pathname.toLowerCase()},Router=function createRouter(opts){var _a,win=window,url=new URL(win.location.href),parseURL=null!==(_a=null==opts?void 0:opts.parseURL)&&void 0!==_a?_a:DEFAULT_PARSE_URL,_createStore2=Object(_gigya_script_store_6321c953_js__WEBPACK_IMPORTED_MODULE_20__.a)({url:url,activePath:parseURL(url)},(function(newV,oldV,prop){return"url"===prop?newV.href!==oldV.href:newV!==oldV})),state=_createStore2.state,onChange=_createStore2.onChange,dispose=_createStore2.dispose,push=function push(href){history.pushState(null,null,href);var url=new URL(href,document.baseURI);state.url=url,state.activePath=parseURL(url)},match=function match(routes){var _step,activePath=state.activePath,_iterator=_createForOfIteratorHelper(routes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var route=_step.value,params=matchPath(activePath,route.path);if(params){if(null!=route.to){var to="string"==typeof route.to?route.to:route.to(activePath);return push(to),match(routes)}return{params:params,route:route}}}}catch(err){_iterator.e(err)}finally{_iterator.f()}},navigationChanged=function navigationChanged(){var url=new URL(win.location.href);state.url=url,state.activePath=parseURL(url)},router={Switch:function Switch(_,childrenRoutes){var result=match(childrenRoutes);if(result)return"function"==typeof result.route.jsx?result.route.jsx(result.params):result.route.jsx},get url(){return state.url},get activePath(){return state.activePath},push:push,onChange:onChange,dispose:function disposeRouter(){win.removeEventListener("popstate",navigationChanged),dispose()}};return navigationChanged(),win.addEventListener("popstate",navigationChanged),router}(),ScreenRouter=function(){function ScreenRouter(hostRef){_classCallCheck(this,ScreenRouter),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.m)(this,hostRef),this.screenSets=[{screen_set:"Default-ProfileUpdate",start_screen:"gigya-update-profile-screen",path:"/_gs/profile"},{screen_set:"Default-RegistrationLogin",start_screen:"gigya-register-screen",path:"/_gs/register"},{screen_set:"Default-RegistrationLogin",start_screen:"gigya-login-screen",path:"/_gs/login"},{screen_set:"Default-LiteRegistration",path:"/lite"}]}var _onRoute;return _createClass(ScreenRouter,[{key:"routes",value:function routes(){return this.screenSets.map((function(screen){return console.log(JSON.stringify(screen)),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)(Route,{path:screen.path,render:function render(){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("gigya-screen",Object.assign({},screen))}})}))}},{key:"links",value:function links(){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("div",{class:"sidenav"},this.screenSets.map((function(screen){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("a",{href:screen.path,class:{active:Router.activePath===screen.path}},screen.path)})))}},{key:"onRoute",value:(_onRoute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(screen){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:Router.push(screen.path);case 1:case"end":return _context2.stop()}}),_callee2)}))),function onRoute(_x3){return _onRoute.apply(this,arguments)})},{key:"render",value:function render(){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.b,null,this.links(),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)(Router.Switch,null,this.routes()))}}]),ScreenRouter}();ScreenRouter.style=":host{display:block}.sidenav{height:100%;width:0;position:fixed;z-index:1;top:0;left:0;background-color:#111;overflow-x:hidden;padding-top:60px;transition:0.5s;}.sidenav a{padding:8px 8px 8px 32px;text-decoration:none;font-size:25px;color:#818181;display:block;transition:0.3s}.sidenav a:hover{color:#f1f1f1}.sidenav .closebtn{position:absolute;top:0;right:25px;font-size:36px;margin-left:50px}#main{transition:margin-left .5s;padding:20px}@media screen and (max-height: 450px){.sidenav{padding-top:15px}.sidenav a{font-size:18px}}";var check=function check(){if(!("serviceWorker"in navigator))throw new Error("No Service Worker support!");if(!("PushManager"in window))throw new Error("No Push API Support!")},GigyaStore=function(){function GigyaStore(hostRef){_classCallCheck(this,GigyaStore),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.m)(this,hostRef)}var _componentWillLoad,_onServiceWorkerUpdate,_componentDidLoad2,_watchDomainHandler,_watchApiKeyHandler,_toast;return _createClass(GigyaStore,[{key:"gigyaServiceHandler",value:function gigyaServiceHandler(){console.log("onGigyaServiceReady")}},{key:"getUrl",value:function getUrl(){return"https://cdns."+this.domain+"/js/gigya.js?apikey="+this.apiKey}},{key:"toast",value:(_toast=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(_){var toast;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_overlays_19926d77_js__WEBPACK_IMPORTED_MODULE_21__.m.create({message:"New version available.",buttons:[{text:"Reload",role:"reload"}],duration:0});case 2:return toast=_context3.sent,_context3.next=5,toast.present();case 5:case"end":return _context3.stop()}}),_callee3)}))),function toast(_x4){return _toast.apply(this,arguments)})},{key:"loadScript",value:function loadScript(){var _this2=this;return new Promise((function(resolve){console.log("loading script "+_this2.getUrl()),_this2.script=document.createElement("script"),_this2.script.id=_this2.apiKey,_this2.script.src=_this2.getUrl(),document.head.appendChild(_this2.script),resolve(_this2.script)}))}},{key:"watchApiKeyHandler",value:(_watchApiKeyHandler=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(newValue,oldValue){return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(newValue===oldValue){_context4.next=4;break}return _context4.next=3,loadGigya(newValue,this.domain);case 3:this.gigya=_context4.sent;case 4:console.log("The new value of apikey is: ",newValue);case 5:case"end":return _context4.stop()}}),_callee4,this)}))),function watchApiKeyHandler(_x5,_x6){return _watchApiKeyHandler.apply(this,arguments)})},{key:"watchDomainHandler",value:(_watchDomainHandler=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(newValue,oldValue){return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(newValue===oldValue){_context5.next=4;break}return _context5.next=3,loadGigya(this.apiKey,newValue);case 3:this.gigya=_context5.sent;case 4:console.log("The new value of domain is: ",newValue);case 5:case"end":return _context5.stop()}}),_callee5,this)}))),function watchDomainHandler(_x7,_x8){return _watchDomainHandler.apply(this,arguments)})},{key:"componentDidLoad",value:(_componentDidLoad2=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:console.log("componentDidLoad"+this.apiKey);case 1:case"end":return _context6.stop()}}),_callee6,this)}))),function componentDidLoad(){return _componentDidLoad2.apply(this,arguments)})},{key:"onServiceWorkerUpdate",value:(_onServiceWorkerUpdate=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var registration,toast;return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,navigator.serviceWorker.getRegistration();case 2:if(null==(registration=_context7.sent)?void 0:registration.waiting){_context7.next=6;break}return console.log("no registration waiting"),_context7.abrupt("return");case 6:return _context7.next=8,_overlays_19926d77_js__WEBPACK_IMPORTED_MODULE_21__.m.create({message:"New version available.",buttons:[{text:"Reload",role:"reload"}],duration:0});case 8:return toast=_context7.sent,_context7.next=11,toast.present();case 11:return _context7.next=13,toast.onWillDismiss();case 13:"reload"===_context7.sent.role&&registration.waiting.postMessage("skipWaiting");case 16:case"end":return _context7.stop()}}),_callee7)}))),function onServiceWorkerUpdate(){return _onServiceWorkerUpdate.apply(this,arguments)})},{key:"componentWillLoad",value:(_componentWillLoad=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(){return regeneratorRuntime.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(check(),console.log("componentWillLoad"+this.apiKey),!this.apiKey){_context8.next=6;break}return _context8.next=5,loadGigya(this.apiKey,this.domain);case 5:console.log("after load: "+this.apiKey);case 6:"serviceWorker"in navigator&&"file:"!==location.protocol&&window.addEventListener("load",(function(){navigator.serviceWorker.register("../sw.js").then((function(reg){reg.onupdatefound=function(){var installingWorker=reg.installing;installingWorker.onstatechange=function(){"installed"===installingWorker.state&&window.dispatchEvent(new Event("swUpdate"))}}})).catch((function(err){console.error("service worker error",err)}))})),"serviceWorker"in navigator?(console.log("'serviceWorker' in navigator"),navigator.serviceWorker.getRegistration().then((function(registration){(null==registration?void 0:registration.waiting)?(null==registration?void 0:registration.active)&&navigator.serviceWorker.addEventListener("controllerchange",(function(){return window.location.reload()})):console.log("no registration waiting")}))):console.log("'serviceWorker' NOT in navigator");case 8:case"end":return _context8.stop()}}),_callee8,this)}))),function componentWillLoad(){return _componentWillLoad.apply(this,arguments)})},{key:"render",value:function render(){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.b,null,Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("slot",null))}}],[{key:"watchers",get:function get(){return{apiKey:["watchApiKeyHandler"],domain:["watchDomainHandler"]}}}]),GigyaStore}();GigyaStore.style=":host{display:block}";var ScreenSetRoute=function(){function ScreenSetRoute(path,screen_set,start_screen){_classCallCheck(this,ScreenSetRoute),this.screen_set=screen_set,this.start_screen=start_screen,this.path=path}return _createClass(ScreenSetRoute,[{key:"render",value:function render(){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)(Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("gigya-screen",Object.assign({},this)))}},{key:"route",value:function route(){return{render:this.render,title:this.path,path:this.path,route:this}}}]),ScreenSetRoute}();var Routes=function ScreenSetRouter(){return function screens(){return[new ScreenSetRoute("/_gs/profile","Default-ProfileUpdate","gigya-update-profile-screen"),new ScreenSetRoute("/_gs/register","Default-RegistrationLogin","gigya-register-screen"),new ScreenSetRoute("/_gs/login","Default-RegistrationLogin","gigya-login-screen"),new ScreenSetRoute("/_gs/lite","Default-LiteRegistration")]}().map((function(screen){return screen.route()}))}(),RouterLink=function(){function RouterLink(hostRef){_classCallCheck(this,RouterLink),Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.m)(this,hostRef)}return _createClass(RouterLink,[{key:"render",value:function render(){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.b,null,Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("div",{class:"sidenav"},Routes.map((function(route){return Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("a",{href:route.path,class:{active:Router.activePath===route.path}},route.title)}))),")",Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("div",{id:"main"},Object(_index_4644c745_js__WEBPACK_IMPORTED_MODULE_17__.j)("slot",null)))}}]),RouterLink}();RouterLink.style=".sidenav{height:100%;width:160px;position:fixed;z-index:1;top:0;left:0;background-color:#111;overflow-x:hidden;padding-top:20px}.sidenav a{padding:6px 8px 6px 16px;text-decoration:none;font-size:25px;color:#818181;display:block}.sidenav a:hover{color:#f1f1f1}.main{margin-left:160px;padding:0px 10px}@media screen and (max-height: 450px){.sidenav{padding-top:15px}.sidenav a{font-size:18px}}"}}]);