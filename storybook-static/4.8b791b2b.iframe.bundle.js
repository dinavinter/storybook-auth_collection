(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1035:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"a",(function(){return getAllStateNodes})),__webpack_require__.d(__webpack_exports__,"b",(function(){return toActionObjects})),__webpack_require__.d(__webpack_exports__,"c",(function(){return toSCXMLEvent})),__webpack_require__.d(__webpack_exports__,"d",(function(){return pathToStateValue})),__webpack_require__.d(__webpack_exports__,"e",(function(){return isBuiltInEvent})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getValue})),__webpack_require__.d(__webpack_exports__,"g",(function(){return start$1})),__webpack_require__.d(__webpack_exports__,"h",(function(){return stop$1})),__webpack_require__.d(__webpack_exports__,"i",(function(){return resolveActions})),__webpack_require__.d(__webpack_exports__,"j",(function(){return partition})),__webpack_require__.d(__webpack_exports__,"k",(function(){return createInvocableActor})),__webpack_require__.d(__webpack_exports__,"l",(function(){return updateHistoryValue})),__webpack_require__.d(__webpack_exports__,"m",(function(){return update})),__webpack_require__.d(__webpack_exports__,"n",(function(){return nullEvent})),__webpack_require__.d(__webpack_exports__,"o",(function(){return stateValuesEqual})),__webpack_require__.d(__webpack_exports__,"p",(function(){return toStatePath})),__webpack_require__.d(__webpack_exports__,"q",(function(){return mapFilterValues})),__webpack_require__.d(__webpack_exports__,"r",(function(){return isLeafNode})),__webpack_require__.d(__webpack_exports__,"s",(function(){return toStatePaths})),__webpack_require__.d(__webpack_exports__,"t",(function(){return State})),__webpack_require__.d(__webpack_exports__,"u",(function(){return nestedPath})),__webpack_require__.d(__webpack_exports__,"v",(function(){return toGuard})),__webpack_require__.d(__webpack_exports__,"w",(function(){return toTransitionConfigArray})),__webpack_require__.d(__webpack_exports__,"x",(function(){return STATE_DELIMITER})),__webpack_require__.d(__webpack_exports__,"y",(function(){return toActionObject})),__webpack_require__.d(__webpack_exports__,"z",(function(){return isMachine})),__webpack_require__.d(__webpack_exports__,"A",(function(){return toActivityDefinition})),__webpack_require__.d(__webpack_exports__,"B",(function(){return _assign})),__webpack_require__.d(__webpack_exports__,"C",(function(){return invoke})),__webpack_require__.d(__webpack_exports__,"D",(function(){return after})),__webpack_require__.d(__webpack_exports__,"E",(function(){return send})),__webpack_require__.d(__webpack_exports__,"F",(function(){return cancel})),__webpack_require__.d(__webpack_exports__,"G",(function(){return getEventType})),__webpack_require__.d(__webpack_exports__,"H",(function(){return initEvent})),__webpack_require__.d(__webpack_exports__,"I",(function(){return raise$1})),__webpack_require__.d(__webpack_exports__,"J",(function(){return send$1})),__webpack_require__.d(__webpack_exports__,"K",(function(){return SpecialTargets})),__webpack_require__.d(__webpack_exports__,"L",(function(){return normalizeTarget})),__webpack_require__.d(__webpack_exports__,"M",(function(){return doneInvoke})),__webpack_require__.d(__webpack_exports__,"N",(function(){return error})),__webpack_require__.d(__webpack_exports__,"O",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,"P",(function(){return isFunction})),__webpack_require__.d(__webpack_exports__,"Q",(function(){return isArray})),__webpack_require__.d(__webpack_exports__,"R",(function(){return toStateValue})),__webpack_require__.d(__webpack_exports__,"S",(function(){return flatten})),__webpack_require__.d(__webpack_exports__,"T",(function(){return isString})),__webpack_require__.d(__webpack_exports__,"U",(function(){return getConfiguration})),__webpack_require__.d(__webpack_exports__,"V",(function(){return interpret})),__webpack_require__.d(__webpack_exports__,"W",(function(){return isInFinalState})),__webpack_require__.d(__webpack_exports__,"X",(function(){return keys})),__webpack_require__.d(__webpack_exports__,"Y",(function(){return __values})),__webpack_require__.d(__webpack_exports__,"Z",(function(){return mapValues})),__webpack_require__.d(__webpack_exports__,"ab",(function(){return matchesState})),__webpack_require__.d(__webpack_exports__,"bb",(function(){return evaluateGuard})),__webpack_require__.d(__webpack_exports__,"cb",(function(){return path})),__webpack_require__.d(__webpack_exports__,"db",(function(){return __spreadArray})),__webpack_require__.d(__webpack_exports__,"eb",(function(){return __read})),__webpack_require__.d(__webpack_exports__,"fb",(function(){return has})),__webpack_require__.d(__webpack_exports__,"gb",(function(){return toArray})),__webpack_require__.d(__webpack_exports__,"hb",(function(){return done})),__webpack_require__.d(__webpack_exports__,"ib",(function(){return mapContext})),__webpack_require__.d(__webpack_exports__,"jb",(function(){return getChildren})),__webpack_require__.d(__webpack_exports__,"kb",(function(){return start})),__webpack_require__.d(__webpack_exports__,"lb",(function(){return raise})),__webpack_require__.d(__webpack_exports__,"mb",(function(){return stop}));__webpack_require__(18),__webpack_require__(340),__webpack_require__(9),__webpack_require__(14),__webpack_require__(13),__webpack_require__(24),__webpack_require__(19),__webpack_require__(20),__webpack_require__(21),__webpack_require__(26),__webpack_require__(1061),__webpack_require__(82),__webpack_require__(38),__webpack_require__(118),__webpack_require__(509),__webpack_require__(32),__webpack_require__(28),__webpack_require__(69),__webpack_require__(85),__webpack_require__(339),__webpack_require__(10),__webpack_require__(131),__webpack_require__(51),__webpack_require__(105),__webpack_require__(132),__webpack_require__(130),__webpack_require__(47),__webpack_require__(254),__webpack_require__(511),__webpack_require__(117),__webpack_require__(1059),__webpack_require__(1060),__webpack_require__(30),__webpack_require__(508);var _assign=function __assign(){return(_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function next(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spreadArray(to,from){for(var i=0,il=from.length,j=to.length;i<il;i++,j++)to[j]=from[i];return to}var STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={};function keys(value){return Object.keys(value)}function matchesState(parentStateId,childStateId,delimiter){void 0===delimiter&&(delimiter=STATE_DELIMITER);var parentStateValue=toStateValue(parentStateId,delimiter),childStateValue=toStateValue(childStateId,delimiter);return isString(childStateValue)?!!isString(parentStateValue)&&childStateValue===parentStateValue:isString(parentStateValue)?parentStateValue in childStateValue:keys(parentStateValue).every((function(key){return key in childStateValue&&matchesState(parentStateValue[key],childStateValue[key])}))}function getEventType(event){try{return isString(event)||"number"==typeof event?""+event:event.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(stateId,delimiter){try{return isArray(stateId)?stateId:stateId.toString().split(delimiter)}catch(e){throw new Error("'"+stateId+"' is not a valid state path.")}}function toStateValue(stateValue,delimiter){return function isStateLike(state){return"object"==typeof state&&"value"in state&&"context"in state&&"event"in state&&"_event"in state}(stateValue)?stateValue.value:isArray(stateValue)?pathToStateValue(stateValue):"string"!=typeof stateValue?stateValue:pathToStateValue(toStatePath(stateValue,delimiter))}function pathToStateValue(statePath){if(1===statePath.length)return statePath[0];for(var value={},marker=value,i=0;i<statePath.length-1;i++)i===statePath.length-2?marker[statePath[i]]=statePath[i+1]:(marker[statePath[i]]={},marker=marker[statePath[i]]);return value}function mapValues(collection,iteratee){for(var result={},collectionKeys=keys(collection),i=0;i<collectionKeys.length;i++){var key=collectionKeys[i];result[key]=iteratee(collection[key],key,collection,i)}return result}function mapFilterValues(collection,iteratee,predicate){var e_1,_a,result={};try{for(var _b=__values(keys(collection)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,item=collection[key];predicate(item)&&(result[key]=iteratee(item,key,collection))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return result}var path=function path(props){return function(object){var e_2,_a,result=object;try{for(var props_1=__values(props),props_1_1=props_1.next();!props_1_1.done;props_1_1=props_1.next()){result=result[props_1_1.value]}}catch(e_2_1){e_2={error:e_2_1}}finally{try{props_1_1&&!props_1_1.done&&(_a=props_1.return)&&_a.call(props_1)}finally{if(e_2)throw e_2.error}}return result}};function nestedPath(props,accessorProp){return function(object){var e_3,_a,result=object;try{for(var props_2=__values(props),props_2_1=props_2.next();!props_2_1.done;props_2_1=props_2.next()){var prop=props_2_1.value;result=result[accessorProp][prop]}}catch(e_3_1){e_3={error:e_3_1}}finally{try{props_2_1&&!props_2_1.done&&(_a=props_2.return)&&_a.call(props_2)}finally{if(e_3)throw e_3.error}}return result}}function toStatePaths(stateValue){return stateValue?isString(stateValue)?[[stateValue]]:flatten(keys(stateValue).map((function(key){var subStateValue=stateValue[key];return"string"==typeof subStateValue||subStateValue&&Object.keys(subStateValue).length?toStatePaths(stateValue[key]).map((function(subPath){return[key].concat(subPath)})):[[key]]}))):[[]]}function flatten(array){var _a;return(_a=[]).concat.apply(_a,__spreadArray([],__read(array)))}function toArrayStrict(value){return isArray(value)?value:[value]}function toArray(value){return void 0===value?[]:toArrayStrict(value)}function mapContext(mapper,context,_event){var e_5,_a;if(isFunction(mapper))return mapper(context,_event.data);var result={};try{for(var _b=__values(Object.keys(mapper)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,subMapper=mapper[key];isFunction(subMapper)?result[key]=subMapper(context,_event.data):result[key]=subMapper}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}return result}function isBuiltInEvent(eventType){return/^(done|error)\./.test(eventType)}function isPromiseLike(value){return value instanceof Promise||!(null===value||!isFunction(value)&&"object"!=typeof value||!isFunction(value.then))}function partition(items,predicate){var e_6,_a,_b=__read([[],[]],2),truthy=_b[0],falsy=_b[1];try{for(var items_1=__values(items),items_1_1=items_1.next();!items_1_1.done;items_1_1=items_1.next()){var item=items_1_1.value;predicate(item)?truthy.push(item):falsy.push(item)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{items_1_1&&!items_1_1.done&&(_a=items_1.return)&&_a.call(items_1)}finally{if(e_6)throw e_6.error}}return[truthy,falsy]}function updateHistoryStates(hist,stateValue){return mapValues(hist.states,(function(subHist,key){if(subHist){var subStateValue=(isString(stateValue)?void 0:stateValue[key])||(subHist?subHist.current:void 0);if(subStateValue)return{current:subStateValue,states:updateHistoryStates(subHist,subStateValue)}}}))}function updateHistoryValue(hist,stateValue){return{current:stateValue,states:updateHistoryStates(hist,stateValue)}}function updateContext(context,_event,assignActions,state){return context?assignActions.reduce((function(acc,assignAction){var e_7,_a,assignment=assignAction.assignment,meta={state:state,action:assignAction,_event:_event},partialUpdate={};if(isFunction(assignment))partialUpdate=assignment(acc,_event.data,meta);else try{for(var _b=__values(keys(assignment)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,propAssignment=assignment[key];partialUpdate[key]=isFunction(propAssignment)?propAssignment(acc,_event.data,meta):propAssignment}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_7)throw e_7.error}}return Object.assign({},acc,partialUpdate)}),context):context}function isArray(value){return Array.isArray(value)}function isFunction(value){return"function"==typeof value}function isString(value){return"string"==typeof value}function toGuard(condition,guardMap){if(condition)return isString(condition)?{type:"xstate.guard",name:condition,predicate:guardMap?guardMap[condition]:void 0}:isFunction(condition)?{type:"xstate.guard",name:condition.name,predicate:condition}:condition}var ActionTypes,SpecialTargets,symbolObservable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function isMachine(value){try{return"__xstatenode"in value}catch(e){return!1}}function toEventObject(event,payload){return isString(event)||"number"==typeof event?_assign({type:event},payload):event}function toSCXMLEvent(event,scxmlEvent){if(!isString(event)&&"$$type"in event&&"scxml"===event.$$type)return event;var eventObject=toEventObject(event);return _assign({name:eventObject.type,data:eventObject,$$type:"scxml",type:"external"},scxmlEvent)}function toTransitionConfigArray(event,configLike){return toArrayStrict(configLike).map((function(transitionLike){return void 0===transitionLike||"string"==typeof transitionLike||isMachine(transitionLike)?{target:transitionLike,event:event}:_assign(_assign({},transitionLike),{event:event})}))}function normalizeTarget(target){if(void 0!==target&&""!==target)return toArray(target)}function evaluateGuard(machine,guard,context,_event,state){var guards=machine.options.guards,guardMeta={state:state,cond:guard,_event:_event};if("xstate.guard"===guard.type)return guard.predicate(context,_event.data,guardMeta);var condFn=guards[guard.type];if(!condFn)throw new Error("Guard '"+guard.type+"' is not implemented on machine '"+machine.id+"'.");return condFn(context,_event.data,guardMeta)}function toInvokeSource(src){return"string"==typeof src?{type:src}:src}function toObserver(nextHandler,errorHandler,completionHandler){if("object"==typeof nextHandler)return nextHandler;var noop=function noop(){};return{next:nextHandler,error:errorHandler||noop,complete:completionHandler||noop}}!function(ActionTypes){ActionTypes.Start="xstate.start",ActionTypes.Stop="xstate.stop",ActionTypes.Raise="xstate.raise",ActionTypes.Send="xstate.send",ActionTypes.Cancel="xstate.cancel",ActionTypes.NullEvent="",ActionTypes.Assign="xstate.assign",ActionTypes.After="xstate.after",ActionTypes.DoneState="done.state",ActionTypes.DoneInvoke="done.invoke",ActionTypes.Log="xstate.log",ActionTypes.Init="xstate.init",ActionTypes.Invoke="xstate.invoke",ActionTypes.ErrorExecution="error.execution",ActionTypes.ErrorCommunication="error.communication",ActionTypes.ErrorPlatform="error.platform",ActionTypes.ErrorCustom="xstate.error",ActionTypes.Update="xstate.update",ActionTypes.Pure="xstate.pure",ActionTypes.Choose="xstate.choose"}(ActionTypes||(ActionTypes={})),function(SpecialTargets){SpecialTargets.Parent="#_parent",SpecialTargets.Internal="#_internal"}(SpecialTargets||(SpecialTargets={}));var start$1=ActionTypes.Start,stop$1=ActionTypes.Stop,raise$1=ActionTypes.Raise,send$1=ActionTypes.Send,cancel$1=ActionTypes.Cancel,nullEvent=ActionTypes.NullEvent,assign=ActionTypes.Assign,log=ActionTypes.Log,init=ActionTypes.Init,invoke=ActionTypes.Invoke,errorPlatform=ActionTypes.ErrorPlatform,error$1=ActionTypes.ErrorCustom,update=ActionTypes.Update,choose=ActionTypes.Choose,pure=ActionTypes.Pure,initEvent=toSCXMLEvent({type:init});function getActionFunction(actionType,actionFunctionMap){return actionFunctionMap&&actionFunctionMap[actionType]||void 0}function toActionObject(action,actionFunctionMap){var actionObject;if(isString(action)||"number"==typeof action){var exec=getActionFunction(action,actionFunctionMap);actionObject=isFunction(exec)?{type:action,exec:exec}:exec||{type:action,exec:void 0}}else if(isFunction(action))actionObject={type:action.name||action.toString(),exec:action};else{if(isFunction(exec=getActionFunction(action.type,actionFunctionMap)))actionObject=_assign(_assign({},action),{exec:exec});else if(exec){var actionType=exec.type||action.type;actionObject=_assign(_assign(_assign({},exec),action),{type:actionType})}else actionObject=action}return Object.defineProperty(actionObject,"toString",{value:function value(){return actionObject.type},enumerable:!1,configurable:!0}),actionObject}var toActionObjects=function toActionObjects(action,actionFunctionMap){return action?(isArray(action)?action:[action]).map((function(subAction){return toActionObject(subAction,actionFunctionMap)})):[]};function toActivityDefinition(action){var actionObject=toActionObject(action);return _assign(_assign({id:isString(action)?action:actionObject.id},actionObject),{type:actionObject.type})}function raise(event){return isString(event)?{type:raise$1,event:event}:send(event,{to:SpecialTargets.Internal})}function send(event,options){return{to:options?options.to:void 0,type:send$1,event:isFunction(event)?event:toEventObject(event),delay:options?options.delay:void 0,id:options&&void 0!==options.id?options.id:isFunction(event)?event.name:getEventType(event)}}var cancel=function cancel(sendId){return{type:cancel$1,sendId:sendId}};function start(activity){var activityDef=toActivityDefinition(activity);return{type:ActionTypes.Start,activity:activityDef,exec:void 0}}function stop(actorRef){var activity=isFunction(actorRef)?actorRef:toActivityDefinition(actorRef);return{type:ActionTypes.Stop,activity:activity,exec:void 0}}function after(delayRef,id){var idSuffix=id?"#"+id:"";return ActionTypes.After+"("+delayRef+")"+idSuffix}function done(id,data){var type=ActionTypes.DoneState+"."+id,eventObject={type:type,data:data,toString:function(){return type}};return eventObject}function doneInvoke(id,data){var type=ActionTypes.DoneInvoke+"."+id,eventObject={type:type,data:data,toString:function(){return type}};return eventObject}function error(id,data){var type=ActionTypes.ErrorPlatform+"."+id,eventObject={type:type,data:data,toString:function(){return type}};return eventObject}function resolveActions(machine,currentState,currentContext,_event,actions,preserveActionOrder){void 0===preserveActionOrder&&(preserveActionOrder=!1);var _a=__read(preserveActionOrder?[[],actions]:partition(actions,(function(action){return action.type===assign})),2),assignActions=_a[0],otherActions=_a[1],updatedContext=assignActions.length?updateContext(currentContext,_event,assignActions,currentState):currentContext,preservedContexts=preserveActionOrder?[currentContext]:void 0;return[flatten(otherActions.map((function(actionObject){var _a;switch(actionObject.type){case raise$1:return function resolveRaise(action){return{type:raise$1,_event:toSCXMLEvent(action.event)}}(actionObject);case send$1:return function resolveSend(action,ctx,_event,delaysMap){var resolvedDelay,meta={_event:_event},resolvedEvent=toSCXMLEvent(isFunction(action.event)?action.event(ctx,_event.data,meta):action.event);if(isString(action.delay)){var configDelay=delaysMap&&delaysMap[action.delay];resolvedDelay=isFunction(configDelay)?configDelay(ctx,_event.data,meta):configDelay}else resolvedDelay=isFunction(action.delay)?action.delay(ctx,_event.data,meta):action.delay;var resolvedTarget=isFunction(action.to)?action.to(ctx,_event.data,meta):action.to;return _assign(_assign({},action),{to:resolvedTarget,_event:resolvedEvent,event:resolvedEvent.data,delay:resolvedDelay})}(actionObject,updatedContext,_event,machine.options.delays);case log:return function resolveLog(action,ctx,_event){return _assign(_assign({},action),{value:isString(action.expr)?action.expr:action.expr(ctx,_event.data,{_event:_event})})}(actionObject,updatedContext,_event);case choose:if(!(matchedActions=null===(_a=actionObject.conds.find((function(condition){var guard=toGuard(condition.cond,machine.options.guards);return!guard||evaluateGuard(machine,guard,updatedContext,_event,currentState)})))||void 0===_a?void 0:_a.actions))return[];var _b=__read(resolveActions(machine,currentState,updatedContext,_event,toActionObjects(toArray(matchedActions),machine.options.actions),preserveActionOrder),2),resolvedActionsFromChoose=_b[0],resolvedContextFromChoose=_b[1];return updatedContext=resolvedContextFromChoose,null==preservedContexts||preservedContexts.push(updatedContext),resolvedActionsFromChoose;case pure:var matchedActions;if(!(matchedActions=actionObject.get(updatedContext,_event.data)))return[];var _c=__read(resolveActions(machine,currentState,updatedContext,_event,toActionObjects(toArray(matchedActions),machine.options.actions),preserveActionOrder),2),resolvedActionsFromPure=_c[0],resolvedContext=_c[1];return updatedContext=resolvedContext,null==preservedContexts||preservedContexts.push(updatedContext),resolvedActionsFromPure;case stop$1:return function resolveStop(action,context,_event){var actorRefOrString=isFunction(action.activity)?action.activity(context,_event.data):action.activity,resolvedActorRef="string"==typeof actorRefOrString?{id:actorRefOrString}:actorRefOrString;return{type:ActionTypes.Stop,activity:resolvedActorRef}}(actionObject,updatedContext,_event);case assign:updatedContext=updateContext(updatedContext,_event,[actionObject],currentState),null==preservedContexts||preservedContexts.push(updatedContext);break;default:var resolvedActionObject=toActionObject(actionObject,machine.options.actions),exec_1=resolvedActionObject.exec;if(exec_1&&preservedContexts){var contextIndex_1=preservedContexts.length-1;resolvedActionObject.exec=function(_ctx){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];null==exec_1||exec_1.apply(void 0,__spreadArray([preservedContexts[contextIndex_1]],__read(args)))}}return resolvedActionObject}})).filter((function(a){return!!a}))),updatedContext]}var isLeafNode=function isLeafNode(stateNode){return"atomic"===stateNode.type||"final"===stateNode.type};function getChildren(stateNode){return keys(stateNode.states).map((function(key){return stateNode.states[key]}))}function getAllStateNodes(stateNode){var stateNodes=[stateNode];return isLeafNode(stateNode)?stateNodes:stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)))}function getConfiguration(prevStateNodes,stateNodes){var e_1,_a,e_2,_b,e_3,_c,e_4,_d,prevAdjList=getAdjList(new Set(prevStateNodes)),configuration=new Set(stateNodes);try{for(var configuration_1=__values(configuration),configuration_1_1=configuration_1.next();!configuration_1_1.done;configuration_1_1=configuration_1.next())for(var m=(s=configuration_1_1.value).parent;m&&!configuration.has(m);)configuration.add(m),m=m.parent}catch(e_1_1){e_1={error:e_1_1}}finally{try{configuration_1_1&&!configuration_1_1.done&&(_a=configuration_1.return)&&_a.call(configuration_1)}finally{if(e_1)throw e_1.error}}var adjList=getAdjList(configuration);try{for(var configuration_2=__values(configuration),configuration_2_1=configuration_2.next();!configuration_2_1.done;configuration_2_1=configuration_2.next()){if("compound"!==(s=configuration_2_1.value).type||adjList.get(s)&&adjList.get(s).length){if("parallel"===s.type)try{for(var _e=(e_3=void 0,__values(getChildren(s))),_f=_e.next();!_f.done;_f=_e.next()){var child=_f.value;"history"!==child.type&&(configuration.has(child)||(configuration.add(child),prevAdjList.get(child)?prevAdjList.get(child).forEach((function(sn){return configuration.add(sn)})):child.initialStateNodes.forEach((function(sn){return configuration.add(sn)}))))}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_f&&!_f.done&&(_c=_e.return)&&_c.call(_e)}finally{if(e_3)throw e_3.error}}}else prevAdjList.get(s)?prevAdjList.get(s).forEach((function(sn){return configuration.add(sn)})):s.initialStateNodes.forEach((function(sn){return configuration.add(sn)}))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{configuration_2_1&&!configuration_2_1.done&&(_b=configuration_2.return)&&_b.call(configuration_2)}finally{if(e_2)throw e_2.error}}try{for(var configuration_3=__values(configuration),configuration_3_1=configuration_3.next();!configuration_3_1.done;configuration_3_1=configuration_3.next()){var s;for(m=(s=configuration_3_1.value).parent;m&&!configuration.has(m);)configuration.add(m),m=m.parent}}catch(e_4_1){e_4={error:e_4_1}}finally{try{configuration_3_1&&!configuration_3_1.done&&(_d=configuration_3.return)&&_d.call(configuration_3)}finally{if(e_4)throw e_4.error}}return configuration}function getValueFromAdj(baseNode,adjList){var childStateNodes=adjList.get(baseNode);if(!childStateNodes)return{};if("compound"===baseNode.type){var childStateNode=childStateNodes[0];if(!childStateNode)return{};if(isLeafNode(childStateNode))return childStateNode.key}var stateValue={};return childStateNodes.forEach((function(csn){stateValue[csn.key]=getValueFromAdj(csn,adjList)})),stateValue}function getAdjList(configuration){var e_5,_a,adjList=new Map;try{for(var configuration_4=__values(configuration),configuration_4_1=configuration_4.next();!configuration_4_1.done;configuration_4_1=configuration_4.next()){var s=configuration_4_1.value;adjList.has(s)||adjList.set(s,[]),s.parent&&(adjList.has(s.parent)||adjList.set(s.parent,[]),adjList.get(s.parent).push(s))}}catch(e_5_1){e_5={error:e_5_1}}finally{try{configuration_4_1&&!configuration_4_1.done&&(_a=configuration_4.return)&&_a.call(configuration_4)}finally{if(e_5)throw e_5.error}}return adjList}function getValue(rootNode,configuration){return getValueFromAdj(rootNode,getAdjList(getConfiguration([rootNode],configuration)))}function has(iterable,item){return Array.isArray(iterable)?iterable.some((function(member){return member===item})):iterable instanceof Set&&iterable.has(item)}function isInFinalState(configuration,stateNode){return"compound"===stateNode.type?getChildren(stateNode).some((function(s){return"final"===s.type&&has(configuration,s)})):"parallel"===stateNode.type&&getChildren(stateNode).every((function(sn){return isInFinalState(configuration,sn)}))}function stateValuesEqual(a,b){if(a===b)return!0;if(void 0===a||void 0===b)return!1;if(isString(a)||isString(b))return a===b;var aKeys=keys(a),bKeys=keys(b);return aKeys.length===bKeys.length&&aKeys.every((function(key){return stateValuesEqual(a[key],b[key])}))}var State=function(){function State(config){var _a,_this=this;this.actions=[],this.activities=EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=config.value,this.context=config.context,this._event=config._event,this._sessionid=config._sessionid,this.event=this._event.data,this.historyValue=config.historyValue,this.history=config.history,this.actions=config.actions||[],this.activities=config.activities||EMPTY_ACTIVITY_MAP,this.meta=function getMeta(configuration){return void 0===configuration&&(configuration=[]),configuration.reduce((function(acc,stateNode){return void 0!==stateNode.meta&&(acc[stateNode.id]=stateNode.meta),acc}),{})}(config.configuration),this.events=config.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=config.configuration,this.transitions=config.transitions,this.children=config.children,this.done=!!config.done,this.tags=null!==(_a=config.tags)&&void 0!==_a?_a:new Set,Object.defineProperty(this,"nextEvents",{get:function get(){return function nextEvents(configuration){return __spreadArray([],__read(new Set(flatten(__spreadArray([],__read(configuration.map((function(sn){return sn.ownEvents}))))))))}(_this.configuration)}})}return State.from=function(stateValue,context){return stateValue instanceof State?stateValue.context!==context?new State({value:stateValue.value,context:context,_event:stateValue._event,_sessionid:null,historyValue:stateValue.historyValue,history:stateValue.history,actions:[],activities:stateValue.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):stateValue:new State({value:stateValue,context:context,_event:initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},State.create=function(config){return new State(config)},State.inert=function(stateValue,context){if(stateValue instanceof State){if(!stateValue.actions.length)return stateValue;var _event=initEvent;return new State({value:stateValue.value,context:context,_event:_event,_sessionid:null,historyValue:stateValue.historyValue,history:stateValue.history,activities:stateValue.activities,configuration:stateValue.configuration,transitions:[],children:{}})}return State.from(stateValue,context)},State.prototype.toStrings=function(stateValue,delimiter){var _this=this;if(void 0===stateValue&&(stateValue=this.value),void 0===delimiter&&(delimiter="."),isString(stateValue))return[stateValue];var valueKeys=keys(stateValue);return valueKeys.concat.apply(valueKeys,__spreadArray([],__read(valueKeys.map((function(key){return _this.toStrings(stateValue[key],delimiter).map((function(s){return key+delimiter+s}))})))))},State.prototype.toJSON=function(){var tags=this.tags,jsonValues=__rest(this,["configuration","transitions","tags"]);return _assign(_assign({},jsonValues),{tags:Array.from(tags)})},State.prototype.matches=function(parentStateValue){return matchesState(parentStateValue,this.value)},State.prototype.hasTag=function(tag){return this.tags.has(tag)},State}(),provide=function provide(service,fn){return fn(service)};function createNullActor(id){return{id:id,send:function send(){},subscribe:function subscribe(){return{unsubscribe:function unsubscribe(){}}},getSnapshot:function getSnapshot(){},toJSON:function toJSON(){return{id:id}}}}function createInvocableActor(invokeDefinition,machine,context,_event){var _a,invokeSrc=toInvokeSource(invokeDefinition.src),serviceCreator=null===(_a=null==machine?void 0:machine.options.services)||void 0===_a?void 0:_a[invokeSrc.type],resolvedData=invokeDefinition.data?mapContext(invokeDefinition.data,context,_event):void 0,tempActor=serviceCreator?function createDeferredActor(entity,id,data){var tempActor=createNullActor(id);if(tempActor.deferred=!0,isMachine(entity)){var initialState_1=tempActor.state=provide(void 0,(function(){return(data?entity.withContext(data):entity).initialState}));tempActor.getSnapshot=function(){return initialState_1}}return tempActor}(serviceCreator,invokeDefinition.id,resolvedData):createNullActor(invokeDefinition.id);return tempActor.meta=invokeDefinition,tempActor}var defaultOptions={deferEvents:!1},Scheduler=function(){function Scheduler(options){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=_assign(_assign({},defaultOptions),options)}return Scheduler.prototype.initialize=function(callback){if(this.initialized=!0,callback){if(!this.options.deferEvents)return void this.schedule(callback);this.process(callback)}this.flushEvents()},Scheduler.prototype.schedule=function(task){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(task),this.flushEvents()}else this.queue.push(task)},Scheduler.prototype.clear=function(){this.queue=[]},Scheduler.prototype.flushEvents=function(){for(var nextCallback=this.queue.shift();nextCallback;)this.process(nextCallback),nextCallback=this.queue.shift()},Scheduler.prototype.process=function(callback){this.processingEvent=!0;try{callback()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},Scheduler}(),children=new Map,sessionIdIndex=0,registry_bookId=function bookId(){return"x:"+sessionIdIndex++},registry_register=function register(id,actor){return children.set(id,actor),id},registry_get=function get(id){return children.get(id)},registry_free=function free(id){children.delete(id)};function getGlobal(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:void 0}function registerService(service){if(getGlobal()){var devTools=function getDevTools(){var global=getGlobal();if(global&&"__xstate__"in global)return global.__xstate__}();devTools&&devTools.register(service)}}function spawnBehavior(behavior,options){void 0===options&&(options={});var state=behavior.initialState,observers=new Set,mailbox=[],flushing=!1,actor=function toActorRef(actorRefLike){return _assign({subscribe:function subscribe(){return{unsubscribe:function unsubscribe(){}}},id:"anonymous",getSnapshot:function getSnapshot(){}},actorRefLike)}({id:options.id,send:function send(event){mailbox.push(event),function flush(){if(!flushing){for(flushing=!0;mailbox.length>0;){var event_1=mailbox.shift();state=behavior.transition(state,event_1,actorCtx),observers.forEach((function(observer){return observer.next(state)}))}flushing=!1}}()},getSnapshot:function getSnapshot(){return state},subscribe:function subscribe(next,handleError,complete){var observer=toObserver(next,handleError,complete);return observers.add(observer),observer.next(state),{unsubscribe:function unsubscribe(){observers.delete(observer)}}}}),actorCtx={parent:options.parent,self:actor,id:options.id||"anonymous",observers:observers};return state=behavior.start?behavior.start(actorCtx):state,actor}var InterpreterStatus,DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1};!function(InterpreterStatus){InterpreterStatus[InterpreterStatus.NotStarted=0]="NotStarted",InterpreterStatus[InterpreterStatus.Running=1]="Running",InterpreterStatus[InterpreterStatus.Stopped=2]="Stopped"}(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function Interpreter(machine,options){var _this=this;void 0===options&&(options=Interpreter.defaultOptions),this.machine=machine,this.scheduler=new Scheduler,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(event,payload){if(isArray(event))return _this.batch(event),_this.state;var _event=toSCXMLEvent(toEventObject(event,payload));if(_this.status===InterpreterStatus.Stopped)return _this.state;if(_this.status!==InterpreterStatus.Running&&!_this.options.deferEvents)throw new Error('Event "'+_event.name+'" was sent to uninitialized service "'+_this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(_event.data));return _this.scheduler.schedule((function(){_this.forward(_event);var nextState=_this.nextState(_event);_this.update(nextState,_event)})),_this._state},this.sendTo=function(event,to){var isParent=_this.parent&&(to===SpecialTargets.Parent||_this.parent.id===to),target=isParent?_this.parent:isString(to)?_this.children.get(to)||registry_get(to):function isActor$1(value){return!!value&&"function"==typeof value.send}(to)?to:void 0;if(target)"machine"in target?target.send(_assign(_assign({},event),{name:event.name===error$1?""+error(_this.id):event.name,origin:_this.sessionId})):target.send(event.data);else if(!isParent)throw new Error("Unable to send event to child '"+to+"' from service '"+_this.id+"'.")};var resolvedOptions=_assign(_assign({},Interpreter.defaultOptions),options),clock=resolvedOptions.clock,logger=resolvedOptions.logger,parent=resolvedOptions.parent,id=resolvedOptions.id,resolvedId=void 0!==id?id:machine.id;this.id=resolvedId,this.logger=logger,this.clock=clock,this.parent=parent,this.options=resolvedOptions,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry_bookId()}return Object.defineProperty(Interpreter.prototype,"initialState",{get:function get(){var _this=this;return this._initialState?this._initialState:provide(this,(function(){return _this._initialState=_this.machine.initialState,_this._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(Interpreter.prototype,"state",{get:function get(){return this._state},enumerable:!1,configurable:!0}),Interpreter.prototype.execute=function(state,actionsConfig){var e_1,_a;try{for(var _b=__values(state.actions),_c=_b.next();!_c.done;_c=_b.next()){var action=_c.value;this.exec(action,state,actionsConfig)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},Interpreter.prototype.update=function(state,_event){var e_2,_a,e_3,_b,e_4,_c,e_5,_d,_this=this;if(state._sessionid=this.sessionId,this._state=state,this.options.execute&&this.execute(this.state),this.children.forEach((function(child){_this.state.children[child.id]=child})),this.devTools&&this.devTools.send(_event.data,state),state.event)try{for(var _e=__values(this.eventListeners),_f=_e.next();!_f.done;_f=_e.next()){(0,_f.value)(state.event)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_a=_e.return)&&_a.call(_e)}finally{if(e_2)throw e_2.error}}try{for(var _g=__values(this.listeners),_h=_g.next();!_h.done;_h=_g.next()){(0,_h.value)(state,state.event)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_h&&!_h.done&&(_b=_g.return)&&_b.call(_g)}finally{if(e_3)throw e_3.error}}try{for(var _j=__values(this.contextListeners),_k=_j.next();!_k.done;_k=_j.next()){(0,_k.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_k&&!_k.done&&(_c=_j.return)&&_c.call(_j)}finally{if(e_4)throw e_4.error}}var isDone=isInFinalState(state.configuration||[],this.machine);if(this.state.configuration&&isDone){var finalChildStateNode=state.configuration.find((function(sn){return"final"===sn.type&&sn.parent===_this.machine})),doneData=finalChildStateNode&&finalChildStateNode.doneData?mapContext(finalChildStateNode.doneData,state.context,_event):void 0;try{for(var _l=__values(this.doneListeners),_m=_l.next();!_m.done;_m=_l.next()){(0,_m.value)(doneInvoke(this.id,doneData))}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_m&&!_m.done&&(_d=_l.return)&&_d.call(_l)}finally{if(e_5)throw e_5.error}}this.stop()}},Interpreter.prototype.onTransition=function(listener){return this.listeners.add(listener),this.status===InterpreterStatus.Running&&listener(this.state,this.state.event),this},Interpreter.prototype.subscribe=function(nextListenerOrObserver,_,completeListener){var listener,_this=this;if(!nextListenerOrObserver)return{unsubscribe:function unsubscribe(){}};var resolvedCompleteListener=completeListener;return"function"==typeof nextListenerOrObserver?listener=nextListenerOrObserver:(listener=nextListenerOrObserver.next.bind(nextListenerOrObserver),resolvedCompleteListener=nextListenerOrObserver.complete.bind(nextListenerOrObserver)),this.listeners.add(listener),this.status===InterpreterStatus.Running&&listener(this.state),resolvedCompleteListener&&this.onDone(resolvedCompleteListener),{unsubscribe:function unsubscribe(){listener&&_this.listeners.delete(listener),resolvedCompleteListener&&_this.doneListeners.delete(resolvedCompleteListener)}}},Interpreter.prototype.onEvent=function(listener){return this.eventListeners.add(listener),this},Interpreter.prototype.onSend=function(listener){return this.sendListeners.add(listener),this},Interpreter.prototype.onChange=function(listener){return this.contextListeners.add(listener),this},Interpreter.prototype.onStop=function(listener){return this.stopListeners.add(listener),this},Interpreter.prototype.onDone=function(listener){return this.doneListeners.add(listener),this},Interpreter.prototype.off=function(listener){return this.listeners.delete(listener),this.eventListeners.delete(listener),this.sendListeners.delete(listener),this.stopListeners.delete(listener),this.doneListeners.delete(listener),this.contextListeners.delete(listener),this},Interpreter.prototype.start=function(initialState){var _this=this;if(this.status===InterpreterStatus.Running)return this;registry_register(this.sessionId,this),this.initialized=!0,this.status=InterpreterStatus.Running;var resolvedState=void 0===initialState?this.initialState:provide(this,(function(){return function isState(state){return!isString(state)&&"value"in state&&"history"in state}(initialState)?_this.machine.resolveState(initialState):_this.machine.resolveState(State.from(initialState,_this.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){_this.update(resolvedState,initEvent)})),this},Interpreter.prototype.stop=function(){var e_6,_a,e_7,_b,e_8,_c,e_9,_d,e_10,_e,_this=this;try{for(var _f=__values(this.listeners),_g=_f.next();!_g.done;_g=_f.next()){var listener=_g.value;this.listeners.delete(listener)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{_g&&!_g.done&&(_a=_f.return)&&_a.call(_f)}finally{if(e_6)throw e_6.error}}try{for(var _h=__values(this.stopListeners),_j=_h.next();!_j.done;_j=_h.next()){(listener=_j.value)(),this.stopListeners.delete(listener)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_j&&!_j.done&&(_b=_h.return)&&_b.call(_h)}finally{if(e_7)throw e_7.error}}try{for(var _k=__values(this.contextListeners),_l=_k.next();!_l.done;_l=_k.next()){listener=_l.value;this.contextListeners.delete(listener)}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_l&&!_l.done&&(_c=_k.return)&&_c.call(_k)}finally{if(e_8)throw e_8.error}}try{for(var _m=__values(this.doneListeners),_o=_m.next();!_o.done;_o=_m.next()){listener=_o.value;this.doneListeners.delete(listener)}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_o&&!_o.done&&(_d=_m.return)&&_d.call(_m)}finally{if(e_9)throw e_9.error}}if(!this.initialized)return this;this.state.configuration.forEach((function(stateNode){var e_11,_a;try{for(var _b=__values(stateNode.definition.exit),_c=_b.next();!_c.done;_c=_b.next()){var action=_c.value;_this.exec(action,_this.state)}}catch(e_11_1){e_11={error:e_11_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_11)throw e_11.error}}})),this.children.forEach((function(child){isFunction(child.stop)&&child.stop()}));try{for(var _p=__values(keys(this.delayedEventsMap)),_q=_p.next();!_q.done;_q=_p.next()){var key=_q.value;this.clock.clearTimeout(this.delayedEventsMap[key])}}catch(e_10_1){e_10={error:e_10_1}}finally{try{_q&&!_q.done&&(_e=_p.return)&&_e.call(_p)}finally{if(e_10)throw e_10.error}}return this.scheduler.clear(),this.initialized=!1,this.status=InterpreterStatus.Stopped,registry_free(this.sessionId),this},Interpreter.prototype.batch=function(events){var _this=this;if(this.status===InterpreterStatus.NotStarted&&this.options.deferEvents);else if(this.status!==InterpreterStatus.Running)throw new Error(events.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule((function(){var e_12,_a,nextState=_this.state,batchChanged=!1,batchedActions=[],_loop_1=function _loop_1(event_1){var _event=toSCXMLEvent(event_1);_this.forward(_event),nextState=provide(_this,(function(){return _this.machine.transition(nextState,_event)})),batchedActions.push.apply(batchedActions,__spreadArray([],__read(nextState.actions.map((function(a){return function bindActionToState(action,state){var exec=action.exec;return _assign(_assign({},action),{exec:void 0!==exec?function(){return exec(state.context,state.event,{action:action,state:state,_event:state._event})}:void 0})}(a,nextState)}))))),batchChanged=batchChanged||!!nextState.changed};try{for(var events_1=__values(events),events_1_1=events_1.next();!events_1_1.done;events_1_1=events_1.next()){_loop_1(events_1_1.value)}}catch(e_12_1){e_12={error:e_12_1}}finally{try{events_1_1&&!events_1_1.done&&(_a=events_1.return)&&_a.call(events_1)}finally{if(e_12)throw e_12.error}}nextState.changed=batchChanged,nextState.actions=batchedActions,_this.update(nextState,toSCXMLEvent(events[events.length-1]))}))},Interpreter.prototype.sender=function(event){return this.send.bind(this,event)},Interpreter.prototype.nextState=function(event){var _this=this,_event=toSCXMLEvent(event);if(0===_event.name.indexOf(errorPlatform)&&!this.state.nextEvents.some((function(nextEvent){return 0===nextEvent.indexOf(errorPlatform)})))throw _event.data.data;return provide(this,(function(){return _this.machine.transition(_this.state,_event)}))},Interpreter.prototype.forward=function(event){var e_13,_a;try{for(var _b=__values(this.forwardTo),_c=_b.next();!_c.done;_c=_b.next()){var id=_c.value,child=this.children.get(id);if(!child)throw new Error("Unable to forward event '"+event+"' from interpreter '"+this.id+"' to nonexistant child '"+id+"'.");child.send(event)}}catch(e_13_1){e_13={error:e_13_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_13)throw e_13.error}}},Interpreter.prototype.defer=function(sendAction){var _this=this;this.delayedEventsMap[sendAction.id]=this.clock.setTimeout((function(){sendAction.to?_this.sendTo(sendAction._event,sendAction.to):_this.send(sendAction._event)}),sendAction.delay)},Interpreter.prototype.cancel=function(sendId){this.clock.clearTimeout(this.delayedEventsMap[sendId]),delete this.delayedEventsMap[sendId]},Interpreter.prototype.exec=function(action,state,actionFunctionMap){void 0===actionFunctionMap&&(actionFunctionMap=this.machine.options.actions);var context=state.context,_event=state._event,actionOrExec=action.exec||getActionFunction(action.type,actionFunctionMap),exec=isFunction(actionOrExec)?actionOrExec:actionOrExec?actionOrExec.exec:action.exec;if(exec)try{return exec(context,_event.data,{action:action,state:this.state,_event:_event})}catch(err){throw this.parent&&this.parent.send({type:"xstate.error",data:err}),err}switch(action.type){case send$1:var sendAction=action;if("number"==typeof sendAction.delay)return void this.defer(sendAction);sendAction.to?this.sendTo(sendAction._event,sendAction.to):this.send(sendAction._event);break;case cancel$1:this.cancel(action.sendId);break;case start$1:var activity=action.activity;if(!this.state.activities[activity.id||activity.type])break;if(activity.type===ActionTypes.Invoke){var invokeSource=toInvokeSource(activity.src),serviceCreator=this.machine.options.services?this.machine.options.services[invokeSource.type]:void 0,id=activity.id,data=activity.data,autoForward="autoForward"in activity?activity.autoForward:!!activity.forward;if(!serviceCreator)return;var resolvedData=data?mapContext(data,context,_event):void 0;if("string"==typeof serviceCreator)return;var source=isFunction(serviceCreator)?serviceCreator(context,_event.data,{data:resolvedData,src:invokeSource}):serviceCreator;if(!source)return;var options=void 0;isMachine(source)&&(source=resolvedData?source.withContext(resolvedData):source,options={autoForward:autoForward}),this.spawn(source,id,options)}else this.spawnActivity(activity);break;case stop$1:this.stopChild(action.activity.id);break;case log:var label=action.label,value=action.value;label?this.logger(label,value):this.logger(value)}},Interpreter.prototype.removeChild=function(childId){this.children.delete(childId),this.forwardTo.delete(childId),delete this.state.children[childId]},Interpreter.prototype.stopChild=function(childId){var child=this.children.get(childId);child&&(this.removeChild(childId),isFunction(child.stop)&&child.stop())},Interpreter.prototype.spawn=function(entity,name,options){if(isPromiseLike(entity))return this.spawnPromise(Promise.resolve(entity),name);if(isFunction(entity))return this.spawnCallback(entity,name);if(function isSpawnedActor(item){return function isActor(item){try{return"function"==typeof item.send}catch(e){return!1}}(item)&&"id"in item}(entity))return this.spawnActor(entity,name);if(function isObservable(value){try{return"subscribe"in value&&isFunction(value.subscribe)}catch(e){return!1}}(entity))return this.spawnObservable(entity,name);if(isMachine(entity))return this.spawnMachine(entity,_assign(_assign({},options),{id:name}));if(function isBehavior(value){return null!==value&&"object"==typeof value&&"transition"in value&&"function"==typeof value.transition}(entity))return this.spawnBehavior(entity,name);throw new Error('Unable to spawn entity "'+name+'" of type "'+typeof entity+'".')},Interpreter.prototype.spawnMachine=function(machine,options){var _this=this;void 0===options&&(options={});var childService=new Interpreter(machine,_assign(_assign({},this.options),{parent:this,id:options.id||machine.id})),resolvedOptions=_assign(_assign({},DEFAULT_SPAWN_OPTIONS),options);resolvedOptions.sync&&childService.onTransition((function(state){_this.send(update,{state:state,id:childService.id})}));var actor=childService;return this.children.set(childService.id,actor),resolvedOptions.autoForward&&this.forwardTo.add(childService.id),childService.onDone((function(doneEvent){_this.removeChild(childService.id),_this.send(toSCXMLEvent(doneEvent,{origin:childService.id}))})).start(),actor},Interpreter.prototype.spawnBehavior=function(behavior,id){var actorRef=spawnBehavior(behavior,{id:id,parent:this});return this.children.set(id,actorRef),actorRef},Interpreter.prototype.spawnPromise=function(promise,id){var resolvedData,_this=this,canceled=!1;promise.then((function(response){canceled||(resolvedData=response,_this.removeChild(id),_this.send(toSCXMLEvent(doneInvoke(id,response),{origin:id})))}),(function(errorData){if(!canceled){_this.removeChild(id);var errorEvent=error(id,errorData);try{_this.send(toSCXMLEvent(errorEvent,{origin:id}))}catch(error){_this.devTools&&_this.devTools.send(errorEvent,_this.state),_this.machine.strict&&_this.stop()}}}));var actor={id:id,send:function send(){},subscribe:function subscribe(next,handleError,complete){var observer=toObserver(next,handleError,complete),unsubscribed=!1;return promise.then((function(response){unsubscribed||(observer.next(response),unsubscribed||observer.complete())}),(function(err){unsubscribed||observer.error(err)})),{unsubscribe:function unsubscribe(){return unsubscribed=!0}}},stop:function stop(){canceled=!0},toJSON:function toJSON(){return{id:id}},getSnapshot:function getSnapshot(){return resolvedData}};return this.children.set(id,actor),actor},Interpreter.prototype.spawnCallback=function(callback,id){var emitted,callbackStop,_this=this,canceled=!1,receivers=new Set,listeners=new Set;try{callbackStop=callback((function receive(e){emitted=e,listeners.forEach((function(listener){return listener(e)})),canceled||_this.send(toSCXMLEvent(e,{origin:id}))}),(function(newListener){receivers.add(newListener)}))}catch(err){this.send(error(id,err))}if(isPromiseLike(callbackStop))return this.spawnPromise(callbackStop,id);var actor={id:id,send:function send(event){return receivers.forEach((function(receiver){return receiver(event)}))},subscribe:function subscribe(next){return listeners.add(next),{unsubscribe:function unsubscribe(){listeners.delete(next)}}},stop:function stop(){canceled=!0,isFunction(callbackStop)&&callbackStop()},toJSON:function toJSON(){return{id:id}},getSnapshot:function getSnapshot(){return emitted}};return this.children.set(id,actor),actor},Interpreter.prototype.spawnObservable=function(source,id){var emitted,_this=this,subscription=source.subscribe((function(value){emitted=value,_this.send(toSCXMLEvent(value,{origin:id}))}),(function(err){_this.removeChild(id),_this.send(toSCXMLEvent(error(id,err),{origin:id}))}),(function(){_this.removeChild(id),_this.send(toSCXMLEvent(doneInvoke(id),{origin:id}))})),actor={id:id,send:function send(){},subscribe:function subscribe(next,handleError,complete){return source.subscribe(next,handleError,complete)},stop:function stop(){return subscription.unsubscribe()},getSnapshot:function getSnapshot(){return emitted},toJSON:function toJSON(){return{id:id}}};return this.children.set(id,actor),actor},Interpreter.prototype.spawnActor=function(actor,name){return this.children.set(name,actor),actor},Interpreter.prototype.spawnActivity=function(activity){var implementation=this.machine.options&&this.machine.options.activities?this.machine.options.activities[activity.type]:void 0;if(implementation){var dispose=implementation(this.state.context,activity);this.spawnEffect(activity.id,dispose)}},Interpreter.prototype.spawnEffect=function(id,dispose){this.children.set(id,{id:id,send:function send(){},subscribe:function subscribe(){return{unsubscribe:function unsubscribe(){}}},stop:dispose||void 0,getSnapshot:function getSnapshot(){},toJSON:function toJSON(){return{id:id}}})},Interpreter.prototype.attachDev=function(){var global=getGlobal();if(this.options.devTools&&global){if(global.__REDUX_DEVTOOLS_EXTENSION__){var devToolsOptions="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=global.__REDUX_DEVTOOLS_EXTENSION__.connect(_assign(_assign({name:this.id,autoPause:!0,stateSanitizer:function stateSanitizer(state){return{value:state.value,context:state.context,actions:state.actions}}},devToolsOptions),{features:_assign({jump:!1,skip:!1},devToolsOptions?devToolsOptions.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},Interpreter.prototype.toJSON=function(){return{id:this.id}},Interpreter.prototype[symbolObservable]=function(){return this},Interpreter.prototype.getSnapshot=function(){return this.status===InterpreterStatus.NotStarted?this.initialState:this._state},Interpreter.defaultOptions=function(global){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(_setTimeout){function setTimeout(_x,_x2){return _setTimeout.apply(this,arguments)}return setTimeout.toString=function(){return _setTimeout.toString()},setTimeout}((function(fn,ms){return setTimeout(fn,ms)})),clearTimeout:function(_clearTimeout){function clearTimeout(_x3){return _clearTimeout.apply(this,arguments)}return clearTimeout.toString=function(){return _clearTimeout.toString()},clearTimeout}((function(id){return clearTimeout(id)}))},logger:global.console.log.bind(console),devTools:!1}}("undefined"!=typeof self?self:global),Interpreter.interpret=interpret,Interpreter}();function interpret(machine,options){return new Interpreter(machine,options)}}).call(this,__webpack_require__(71))},1059:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(22),fails=__webpack_require__(35),toObject=__webpack_require__(84),toPrimitive=__webpack_require__(345);$({target:"Date",proto:!0,forced:fails((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function toJSON(key){var O=toObject(this),pv=toPrimitive(O,"number");return"number"!=typeof pv||isFinite(pv)?O.toISOString():null}})},1060:function(module,exports,__webpack_require__){"use strict";__webpack_require__(22)({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return URL.prototype.toString.call(this)}})},1061:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(22),$every=__webpack_require__(119).every;$({target:"Array",proto:!0,forced:!__webpack_require__(171)("every")},{every:function every(callbackfn){return $every(this,callbackfn,arguments.length>1?arguments[1]:void 0)}})}}]);